<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Italy Visa Verification</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      display: flex;
    }
    .sidebar {
      width: 200px;
      background-color: #003366;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 20px;
    }
    .sidebar button {
      margin: 10px;
      padding: 10px;
      width: 90%;
      background-color: #0055a5;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .main {
      flex-grow: 1;
      padding: 20px;
    }
    header, footer {
      display: flex;
      align-items: center;
      padding: 10px;
    }
    header img, footer img {
      height: 50px;
      margin-right: 10px;
    }
    .form-group {
      margin: 10px 0;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    #loading {
      display: none;
      text-align: center;
    }
    #error {
      color: red;
      display: none;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <button onclick="document.getElementById('form').submit()">Track Application</button>
    <button onclick="document.getElementById('passport').click()">آپلود پاسپورت</button>
    <button onclick="document.getElementById('photo').click()">آپلود تصویر</button>
  </div>
  <div class="main">
    <header>
      <img src="logo.png" alt="Logo">
      <h2>فرم بررسی اطلاعات برای ویزای ایتالیا</h2>
    </header>
    <form id="form" onsubmit="return handleSubmit(event)">
      <div class="form-group">
        <label>اسم</label>
        <input type="text" id="name" required>
      </div>
      <div class="form-group">
        <label>تخلص</label>
        <input type="text" id="surname" required>
      </div>
      <div class="form-group">
        <label>شماره پاسپورت</label>
        <input type="text" id="passport_number" required>
      </div>
      <div class="form-group">
        <label>شماره کلاینت</label>
        <input type="text" id="client_number" required>
      </div>
      <input type="file" id="passport" style="display: none">
      <input type="file" id="photo" style="display: none">
    </form>
    <div id="loading">
      <p>در حال بررسی اطلاعات...</p>
      <img src="loading.gif" alt="loading">
    </div>
    <div id="error">اطلاعات شما یافت نشد!</div>
    <footer>
      <img src="logo.png" alt="Logo">
    </footer>
  </div>

  <script>
    async function handleSubmit(event) {
      event.preventDefault();
      document.getElementById('error').style.display = 'none';
      document.getElementById('loading').style.display = 'block';

      const name = document.getElementById('name').value.trim();
      const surname = document.getElementById('surname').value.trim();
      const dob = document.getElementById('dob').value;
      const passport = document.getElementById('passport_number').value.trim();
      const client = document.getElementById('client_number').value.trim();

      const res = await fetch('data.json');
      const data = await res.json();

      setTimeout(() => {
        const match = data.find(d => 
          d.name === name &&
          d.surname === surname &&
          d.dob === dob &&
          d.passport === passport &&
          d.client === client
        );

        document.getElementById('loading').style.display = 'none';

        if (match) {
          window.location.href = match.pdf;
        } else {
          document.getElementById('error').style.display = 'block';
        }
      }, 5000);
    }
  </script>
</body>
</html>
